{% extends "base.html" %}

{% block content %}
<h1>{{ workout.name }}</h1>

<h2>Workout Information</h2>
<ul>
  <li><strong>Description:</strong> {{ workout.description }}</li>
  <li><strong>Duration:</strong> {{ workout.duration_time }} minutes</li>
</ul>

<h2>Trainer</h2>
{% if workout.trainer %}
<p>
  <a href="{% url 'gym:trainer-detail' pk=workout.trainer.id %}">
    {{ workout.trainer.user.get_full_name }}
  </a>
</p>
<p><strong>Specialization:</strong> {{ workout.trainer.specialization.name|default:"N/A" }}</p>
{% else %}
<p>No trainer assigned to this workout.</p>
{% endif %}

<h2>Schedule</h2>
{% if workout.schedules.exists %}
<table class="table">
  <thead>
    <tr>
      <th>Date & Time</th>
      <th>Capacity</th>
      <th>Booked</th>
      <th>Available</th>
    </tr>
  </thead>
  <tbody>
    {% for schedule in workout.schedules.all %}
    <tr>
      <td>
        <a href="{% url 'gym:schedule-detail' pk=schedule.id %}">
          {{ schedule.start_time|date:"d M Y, H:i" }}
        </a>
      </td>
      <td>{{ schedule.capacity }}</td>
      <td>{{ schedule.bookings.count }}</td>
      <td>{{ schedule.capacity|add:"-"|add:schedule.bookings.count }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No schedule assigned to this workout.</p>
{% endif %}
{% endblock %}
